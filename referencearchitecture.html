<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Reconciliation System - Reference Architecture</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .architecture-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.8;
            font-size: 14px;
        }
        
        .diagram-area {
            position: relative;
            padding: 30px;
            background: #fafbfc;
        }
        
        .layer {
            margin-bottom: 25px;
            position: relative;
        }
        
        .layer-title {
            background: #34495e;
            color: white;
            padding: 8px 15px;
            font-weight: 600;
            font-size: 14px;
            border-radius: 6px 6px 0 0;
            margin-bottom: 0;
        }
        
        .layer-content {
            background: white;
            border: 2px solid #34495e;
            border-top: none;
            border-radius: 0 0 6px 6px;
            padding: 20px;
            min-height: 120px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: flex-start;
        }
        
        /* Component Styles */
        .component {
            border-radius: 8px;
            padding: 12px;
            min-width: 160px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        
        .component:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .component-title {
            font-weight: 600;
            font-size: 12px;
            margin-bottom: 6px;
        }
        
        .component-details {
            font-size: 10px;
            opacity: 0.8;
            line-height: 1.3;
        }
        
        /* Color Themes */
        .aws-service {
            background: linear-gradient(135deg, #FF9900, #FFB84D);
            color: white;
        }
        
        .custom-app {
            background: linear-gradient(135deg, #2196F3, #64B5F6);
            color: white;
        }
        
        .ai-component {
            background: linear-gradient(135deg, #4CAF50, #81C784);
            color: white;
        }
        
        .data-store {
            background: linear-gradient(135deg, #757575, #9E9E9E);
            color: white;
        }
        
        .security {
            background: linear-gradient(135deg, #F44336, #EF5350);
            color: white;
        }
        
        /* Specific Component Sizes */
        .large-component {
            min-width: 250px;
            flex: 1;
        }
        
        .medium-component {
            min-width: 200px;
        }
        
        .small-component {
            min-width: 140px;
        }
        
        /* Browser Component */
        .browser {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            color: #1976D2;
            border: 2px solid #2196F3;
            min-width: 300px;
        }
        
        .browser::before {
            content: "üåê";
            font-size: 20px;
            display: block;
            margin-bottom: 5px;
        }
        
        /* React Frontend */
        .react-frontend {
            background: linear-gradient(135deg, #61DAFB, #21A0C4);
            color: white;
            min-width: 400px;
            padding: 20px;
        }
        
        .sub-components {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }
        
        .sub-component {
            background: rgba(255,255,255,0.2);
            padding: 6px;
            border-radius: 4px;
            font-size: 9px;
        }
        
        /* Agent Component */
        .agent-container {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
            color: white;
            min-width: 600px;
            padding: 25px;
            border-radius: 12px;
        }
        
        .agent-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 8px;
            margin-top: 15px;
        }
        
        .tool {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 6px;
            font-size: 9px;
        }
        
        .workflow-stages {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            align-items: center;
        }
        
        .stage {
            background: rgba(255,255,255,0.3);
            padding: 10px;
            border-radius: 6px;
            font-size: 10px;
            flex: 1;
            margin: 0 5px;
            text-align: center;
        }
        
        .arrow {
            color: white;
            font-size: 16px;
            font-weight: bold;
        }
        
        /* Database Components */
        .database {
            border-radius: 50px 50px 20px 20px;
            position: relative;
        }
        
        .database::before {
            content: "üóÑÔ∏è";
            font-size: 18px;
            display: block;
            margin-bottom: 5px;
        }
        
        /* S3 Bucket */
        .s3-bucket {
            min-width: 250px;
            padding: 20px;
        }
        
        .s3-bucket::before {
            content: "ü™£";
            font-size: 20px;
            display: block;
            margin-bottom: 5px;
        }
        
        .folder-structure {
            font-family: monospace;
            font-size: 9px;
            text-align: left;
            margin-top: 10px;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 4px;
        }
        
        /* Icons */
        .component-icon {
            font-size: 20px;
            display: block;
            margin-bottom: 5px;
        }
        
        /* Data Flow Arrows */
        .flow-arrow {
            position: absolute;
            pointer-events: none;
            z-index: 10;
        }
        
        /* Legend */
        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border: 2px solid #34495e;
            border-radius: 8px;
            padding: 15px;
            font-size: 11px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            max-width: 250px;
        }
        
        .legend h4 {
            margin: 0 0 10px 0;
            color: #34495e;
            font-size: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .legend-color {
            width: 20px;
            height: 12px;
            border-radius: 3px;
            margin-right: 8px;
        }
        
        .performance-box {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            font-size: 11px;
            max-width: 250px;
        }
        
        .performance-box h4 {
            margin: 0 0 10px 0;
            color: #495057;
            font-size: 12px;
        }
        
        @media (max-width: 768px) {
            .layer-content {
                flex-direction: column;
            }
            
            .component {
                min-width: 100%;
            }
            
            .legend, .performance-box {
                position: relative;
                right: auto;
                bottom: auto;
                top: auto;
                margin: 20px 0;
            }
        }
    </style>
</head>
<body>
    <div class="architecture-container">
        <div class="header">
            <h1>Trade Reconciliation System</h1>
            <p>AI-Powered Reference Architecture | AWS Cloud Platform | Strands Framework</p>
        </div>
        
        <div class="diagram-area">
            <!-- PRESENTATION LAYER -->
            <div class="layer">
                <div class="layer-title">üñ•Ô∏è PRESENTATION LAYER - User Interface</div>
                <div class="layer-content">
                    <div class="component browser large-component">
                        <div class="component-title">Trade Reconciliation Portal</div>
                        <div class="component-details">
                            https://trade-recon.company.com<br>
                            Trade Operations Team<br>
                            Responsive Web Access
                        </div>
                    </div>
                    
                    <div class="component react-frontend large-component">
                        <div class="component-title">React TypeScript Frontend</div>
                        <div class="sub-components">
                            <div class="sub-component">Authentication</div>
                            <div class="sub-component">Dashboard</div>
                            <div class="sub-component">Document Upload</div>
                            <div class="sub-component">Trade Console</div>
                            <div class="sub-component">Agent Monitor</div>
                            <div class="sub-component">Reports</div>
                        </div>
                        <div class="component-details" style="margin-top: 10px;">
                            Real-time dashboards ‚Ä¢ Interactive matching ‚Ä¢ AI monitoring
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- APPLICATION LAYER -->
            <div class="layer">
                <div class="layer-title">‚öôÔ∏è APPLICATION LAYER - API & Business Logic</div>
                <div class="layer-content">
                    <div class="component aws-service medium-component">
                        <span class="component-icon">üö™</span>
                        <div class="component-title">Amazon API Gateway</div>
                        <div class="component-details">
                            /dashboard ‚Ä¢ /documents ‚Ä¢ /trades<br>
                            /matches ‚Ä¢ /reconciliation<br>
                            CORS ‚Ä¢ Rate Limiting ‚Ä¢ Auth
                        </div>
                    </div>
                    
                    <div class="component security small-component">
                        <span class="component-icon">üõ°Ô∏è</span>
                        <div class="component-title">AWS Cognito / IAM</div>
                        <div class="component-details">
                            JWT Tokens<br>
                            Role-based Access
                        </div>
                    </div>
                    
                    <div class="component aws-service medium-component">
                        <span class="component-icon">Œª</span>
                        <div class="component-title">Trade API Handler</div>
                        <div class="component-details">
                            Python 3.9<br>
                            Request routing ‚Ä¢ Validation<br>
                            Response formatting
                        </div>
                    </div>
                    
                    <div class="component aws-service medium-component">
                        <span class="component-icon">üìÑ</span>
                        <div class="component-title">PDF Processing Lambda</div>
                        <div class="component-details">
                            S3 Upload Triggers<br>
                            Textract Integration<br>
                            Document Extraction
                        </div>
                    </div>
                    
                    <div class="component ai-component medium-component">
                        <span class="component-icon">ü§ñ</span>
                        <div class="component-title">Strands Agent Runtime</div>
                        <div class="component-details">
                            Strands AI Framework<br>
                            Workflow Orchestration<br>
                            Agent Management
                        </div>
                    </div>
                    
                    <div class="component aws-service small-component">
                        <span class="component-icon">üìã</span>
                        <div class="component-title">Amazon Textract</div>
                        <div class="component-details">
                            Document OCR<br>
                            Text Extraction
                        </div>
                    </div>
                    
                    <div class="component aws-service small-component">
                        <span class="component-icon">üëÅÔ∏è</span>
                        <div class="component-title">Amazon Rekognition</div>
                        <div class="component-details">
                            Table Detection<br>
                            Form Recognition
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI PROCESSING LAYER -->
            <div class="layer">
                <div class="layer-title">üß† AI PROCESSING LAYER - Agents & Workflows</div>
                <div class="layer-content">
                    <div class="agent-container large-component">
                        <span class="component-icon">ü§ñ</span>
                        <div class="component-title">Trade Reconciliation Agent (Strands Framework)</div>
                        
                        <div class="agent-tools">
                            <div class="tool">fetch_unmatched_trades()</div>
                            <div class="tool">find_potential_matches()</div>
                            <div class="tool">compute_similarity()</div>
                            <div class="tool">update_match_status()</div>
                            <div class="tool">compare_fields()</div>
                            <div class="tool">determine_overall_status()</div>
                            <div class="tool">generate_reconciliation_report()</div>
                            <div class="tool">store_report()</div>
                        </div>
                        
                        <div class="workflow-stages">
                            <div class="stage">1. Document Processing</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage">2. Trade Matching</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage">3. Field Reconciliation</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage">4. Report Generation</div>
                        </div>
                        
                        <div class="component-details" style="margin-top: 15px;">
                            Python + Strands AI Framework ‚Ä¢ Configurable thresholds ‚Ä¢ Automated workflows
                        </div>
                    </div>
                    
                    <div class="component ai-component small-component">
                        <span class="component-icon">‚öôÔ∏è</span>
                        <div class="component-title">MatcherConfig</div>
                        <div class="component-details">
                            Thresholds<br>
                            Weights<br>
                            Algorithms
                        </div>
                    </div>
                    
                    <div class="component ai-component small-component">
                        <span class="component-icon">üîß</span>
                        <div class="component-title">ReconcilerConfig</div>
                        <div class="component-details">
                            Tolerances<br>
                            Critical Fields<br>
                            Rules Engine
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- DATA LAYER -->
            <div class="layer">
                <div class="layer-title">üóÑÔ∏è DATA LAYER - Storage & Persistence</div>
                <div class="layer-content">
                    <div class="component data-store database medium-component">
                        <div class="component-title">BankTradeData</div>
                        <div class="component-details">
                            DynamoDB Table<br>
                            trade_id, trade_date<br>
                            counterparty, notional<br>
                            GSI on date & counterparty
                        </div>
                    </div>
                    
                    <div class="component data-store database medium-component">
                        <div class="component-title">CounterpartyTradeData</div>
                        <div class="component-details">
                            DynamoDB Table<br>
                            trade_id, trade_date<br>
                            counterparty, notional<br>
                            GSI on date & counterparty
                        </div>
                    </div>
                    
                    <div class="component data-store database medium-component">
                        <div class="component-title">TradeMatches</div>
                        <div class="component-details">
                            DynamoDB Table<br>
                            match_id, bank_trade_id<br>
                            counterparty_trade_id<br>
                            match_confidence, status
                        </div>
                    </div>
                    
                    <div class="component aws-service s3-bucket large-component">
                        <div class="component-title">S3: fab-otc-reconciliation-deployment</div>
                        <div class="folder-structure">
/BANK/<br>
  ‚îú‚îÄ‚îÄ processed/<br>
  ‚îú‚îÄ‚îÄ pending/<br>
  ‚îî‚îÄ‚îÄ failed/<br>
/COUNTERPARTY/<br>
  ‚îú‚îÄ‚îÄ processed/<br>
  ‚îú‚îÄ‚îÄ pending/<br>
  ‚îî‚îÄ‚îÄ failed/<br>
/REPORTS/<br>
  ‚îú‚îÄ‚îÄ daily/<br>
  ‚îú‚îÄ‚îÄ monthly/<br>
  ‚îî‚îÄ‚îÄ ad-hoc/
                        </div>
                    </div>
                    
                    <div class="component aws-service medium-component">
                        <span class="component-icon">üìä</span>
                        <div class="component-title">CloudWatch</div>
                        <div class="component-details">
                            Logs ‚Ä¢ Metrics ‚Ä¢ Alarms<br>
                            Performance Dashboards<br>
                            Business KPIs
                        </div>
                    </div>
                    
                    <div class="component aws-service small-component">
                        <span class="component-icon">üîç</span>
                        <div class="component-title">AWS X-Ray</div>
                        <div class="component-details">
                            Distributed Tracing<br>
                            Performance Analysis
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Performance Metrics Box -->
    <div class="performance-box">
        <h4>üìà Performance Metrics</h4>
        <div>‚Ä¢ API Response: &lt; 500ms</div>
        <div>‚Ä¢ Document Processing: 2-5 min</div>
        <div>‚Ä¢ Matching Accuracy: 95%+</div>
        <div>‚Ä¢ Concurrent Users: 50</div>
        <div>‚Ä¢ Lambda Auto-scaling: 0-1000</div>
        <div>‚Ä¢ API Rate Limit: 1000 req/sec</div>
    </div>
    
    <!-- Legend -->
    <div class="legend">
        <h4>üé® Legend</h4>
        
        <div style="margin-bottom: 15px;">
            <strong>Colors:</strong>
            <div class="legend-item">
                <div class="legend-color aws-service"></div>
                AWS Services
            </div>
            <div class="legend-item">
                <div class="legend-color custom-app"></div>
                Custom Applications
            </div>
            <div class="legend-item">
                <div class="legend-color ai-component"></div>
                AI/ML Components
            </div>
            <div class="legend-item">
                <div class="legend-color data-store"></div>
                Data Storage
            </div>
            <div class="legend-item">
                <div class="legend-color security"></div>
                Security Components
            </div>
        </div>
        
        <div>
            <strong>Symbols:</strong><br>
            üîÑ Sync API calls<br>
            ‚ö° Async processing<br>
            üìä Real-time data<br>
            üîê Authentication<br>
            ü§ñ AI/ML processing
        </div>
    </div>
    
    <script>
        // Add interactivity
        document.querySelectorAll('.component').forEach(component => {
            component.addEventListener('click', function() {
                // Could add modal with detailed information
                console.log('Component clicked:', this.querySelector('.component-title').textContent);
            });
        });
        
        // Add hover effects for better UX
        document.querySelectorAll('.component').forEach(component => {
            component.addEventListener('mouseenter', function() {
                this.style.zIndex = '20';
            });
            
            component.addEventListener('mouseleave', function() {
                this.style.zIndex = 'auto';
            });
        });
    </script>
</body>
</html>