# AgentCore Runtime Configuration for Trade Matching Swarm
# This configuration deploys the Trade Matching Swarm as a serverless agent
# with AgentCore Memory integration for learning from past trade processing patterns.

name: trade-matching-swarm
description: Trade Matching Swarm with AgentCore Memory integration for OTC derivative trade confirmation processing
runtime: python3.11

# Environment variables for agent configuration
environment:
  # AgentCore Memory configuration
  AGENTCORE_MEMORY_ID: ${AGENTCORE_MEMORY_ID}
  ACTOR_ID: trade_matching_system
  
  # AWS configuration
  AWS_REGION: us-east-1
  
  # S3 configuration
  S3_BUCKET_NAME: ${S3_BUCKET_NAME}
  
  # DynamoDB table configuration
  DYNAMODB_BANK_TABLE: ${DYNAMODB_BANK_TABLE}
  DYNAMODB_COUNTERPARTY_TABLE: ${DYNAMODB_COUNTERPARTY_TABLE}
  DYNAMODB_EXCEPTIONS_TABLE: ${DYNAMODB_EXCEPTIONS_TABLE}
  
  # Bedrock model configuration
  BEDROCK_MODEL_ID: amazon.nova-pro-v1:0
  
  # Execution mode configuration
  HTTP_ORCHESTRATOR_MODE: true
  A2A_MODE: ${A2A_MODE:-false}
  AGENTCORE_BEARER_TOKEN: ${AGENTCORE_BEARER_TOKEN}

# Python dependencies
dependencies:
  - strands>=0.1.0
  - strands-tools>=0.1.0
  - bedrock-agentcore[strands-agents]>=0.1.0
  - boto3>=1.34.0
  - pydantic>=2.0.0

# Resource configuration
timeout: 600  # 10 minutes total execution timeout
memory: 2048  # 2GB memory allocation

# Entry point
handler: trade_matching_swarm_agentcore_simple.invoke
